(()=>{"use strict";const t=2e3;function e(e,s){const o=`<span class="alert alert--${s}">${e}</span>`;document.body.insertAdjacentHTML("afterbegin",o),setTimeout((()=>{document.querySelector(".alert").remove()}),t)}class s{constructor(t,e,s){this.form=t,this.action=t.getAttribute("action"),this.method=t.getAttribute("method"),this.form.addEventListener("submit",this.submit.bind(this))}async submit(s){try{s.preventDefault();const o={};new FormData(this.form).forEach(((t,e)=>{o[e]=t})),"resetPassword"===this.form.id&&(o.token=s.submitter.dataset.token);const r=await fetch(this.action,{headers:{"Content-Type":"application/json"},method:this.method,body:JSON.stringify(o)}),i=await r.json();if("fail"===i.status||"error"===i.status)throw new Error(i.message);e(i.message,"success"),"login"!==this.form.id&&"signup"!==this.form.id&&"resetPassword"!==this.form.id||setTimeout((()=>window.location="/"),t),this.form.dataset.reload&&setTimeout((()=>window.location.reload()),t)}catch(t){e(t.message,"error")}}}["#login","#signup","#resetPassword","#forgotPassword","#form-account"].forEach((t=>{const e=document.querySelector(t);e&&new s(e)}))})();